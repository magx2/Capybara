package /lambda

import /capybara/type

fun multiline_lambda_invocation(): Int {
	x = { x = 44 ; y = 2 + 2 ; x * y }
	y = { x = 2 ; y = 6 ; x + y }
	return x() + y()
}

def main(List[String]) {
	assert /lambda:simple_lambda()() == 44, "Simple lambda should return `44`!"
	assert simple_lambda()() == 44, "Simple lambda should return `44` (no fully qualified name)!"
	assert lambda_as_assignment() == 55, "`lambda_as_assignment` should return `55`!"
	assert lambda_as_parameter({ 66 }) == 66, "`lambda_as_parameter` should return `66`!"
	assert multiline_lambda()() == 88, "`multiline_lambda` should return 88"
	assert { x = 2 ; y = 3 ; x + y}() == { 5 }(), { "lambda should return 5" }()
	assert multiline_lambda_invocation() == 184, "`multiline_lambda_invocation` should return `184`"
}

